### Детальное описание представлений данных

1. **Планируемые расходы (прошлые и будущие)**
   - **Цель:**
     Показать ближайшие запланированные расходы, включая:
     - Расходы с прошедшей датой, которые еще не были совершены, но на них уже есть фактические средства.
     - Расходы с будущей датой, которые ожидаются.
   - **Условия:**
     - Отображаются только те планы расходов, на которые есть фактические средства.
     - Данные сортируются по дате, начиная с прошлых и переходя к ближайшим будущим.
     - Планируемые доходы или планы, которые не связаны с конкретными расходами, не отображаются.
   - **Пример таблицы:**
   
     | Дата       | Категория           | Сумма      | Статус       |
     |------------|--------------------|------------|--------------|
     | 2024-12-01 | Транспорт          | 5000 руб.  | Не выполнен  |
     | 2024-12-03 | Развлечения        | 3000 руб.  | Не выполнен  |
     | 2024-12-05 | Продукты           | 2000 руб.  | Не выполнен  |
     | 2024-11-28 | Коммунальные услуги| 4000 руб.  | Просрочен    |

2. **Распределение фактических денег по планам**
   - **Цель:**
     Показать текущее распределение фактических средств между всеми активными планами, включая фонды, хранилища и запланированные расходы.
   - **Условия:**
     - Планы отображаются по их типу: фонды, хранилища, запланированные расходы.
     - Распределение представляется в виде процента от общего баланса пользователя.
     - Планы с автоматическим израсходованием всех поступлений или без текущего остатка не отображаются.
   - **Пример таблицы:**

     | План            | Тип              | Сумма      | Процент от общего |
     |-----------------|------------------|------------|-------------------|
     | Накопления      | Фонд             | 10000 руб. | 50%              |
     | Продукты        | Запланированные  | 5000 руб.  | 25%              |
     | Развлечения     | Запланированные  | 3000 руб.  | 15%              |
     | Резервный фонд  | Хранилище        | 2000 руб.  | 10%              |

3. **Будущее распределение по фондам и накоплениям**
   - **Цель:**
     Показать прогнозируемое распределение средств в будущем по накопительным планам и фондам, а также:
     - Отразить текущий прогноз относительно ранее сделанных прогнозов.
     - Сравнить реальный текущий момент с прогнозируемым.
     - Показать минимальные пессимистичные цели для каждого плана.
     - Указать точки цели для некоторых планов.
   - **Условия:**
     - Исключаются:
       - Планы с автоматическим израсходованием всех поступлений.
       - Планируемые доходы.
       - Планируемые расходы (считается, что они будут полностью выполнены).
     - Данные отображаются начиная с нуля до настоящего момента и в будущее.
     - Средства отображаются по периодам (например, по месяцам) и распределяются между накоплениями и фондами.
   - **Пример таблицы:**

     | Период          | Накопления   | Резервный фонд | Долгосрочные сбережения | Минимум (цель) | Точка цели |
     |-----------------|--------------|----------------|-------------------------|----------------|------------|
     | Январь 2024     | 5000 руб.    | 2000 руб.      | 10000 руб.             | 15000 руб.     | 18000 руб. |
     | Февраль 2024    | 7000 руб.    | 2500 руб.      | 12000 руб.             | 16000 руб.     | 19000 руб. |
     | Март 2024       | 8000 руб.    | 3000 руб.      | 15000 руб.             | 17000 руб.     | 20000 руб. |
   - **График:**
     На графике показываются:
     - Фактические текущие значения.
     - Прогнозируемые значения.
     - Минимальные пессимистичные цели (обозначены пунктирной линией).
     - Точки цели для планов (обозначены маркерами на конкретных датах).
     - Сравнение реальных и прогнозируемых значений в текущем моменте.

4. **Распределение доходов по планам, расходам и категориям (прошлое и будущее)**
   - **Цель:**
     - Показать, как реальные доходы распределялись по планам в прошлом и как прогнозируемые доходы будут распределяться по планам в будущем.
     - Указать реальное распределение доходов по транзакциям и категориям расходов в прошлом.
   - **Режимы:**
     - Распределение по планам: отображает фактические и прогнозируемые суммы.
     - Распределение по расходам: показывает, на что реально были потрачены деньги.
     - Распределение по категориям: группирует расходы по категориям транзакций.
   - **Условия:**
     - Предполагается, что все запланированные доходы и расходы будут выполнены.
     - Отображаются только планы-фонды и текущие правила распределения.
     - Для каждого дохода отображается:
       - Суммы, распределенные по планам.
       - Прогнозируемое распределение будущих доходов с учетом автораспределения и ручных трансферов.
       - Реальное использование средств на расходы.
       - Эталонное распределение доходов.
     - Включает категории расходов из транзакций.
   - **Пример таблицы распределения доходов:**

     | Дата дохода     | Источник дохода   | Сумма дохода | План            | Распределенная сумма | Процент   |
     |-----------------|------------------|--------------|-----------------|----------------------|-----------|
     | 2024-11-01      | Зарплата         | 50000 руб.   | Накопления      | 25000 руб.           | 50%       |
     |                 |                  |              | Продукты        | 15000 руб.           | 30%       |
     |                 |                  |              | Резервный фонд  | 10000 руб.           | 20%       |
     | 2024-11-15      | Подработка       | 10000 руб.   | Развлечения     | 5000 руб.            | 50%       |
     |                 |                  |              | Накопления      | 5000 руб.            | 50%       |
     | 2024-12-15      | Ожидаемый доход  | 20000 руб.   | Продукты        | 10000 руб.           | 50%       |
     |                 |                  |              | Накопления      | 10000 руб.           | 50%       |

   - **Пример таблицы расходов:**
   
     | Категория       | Дата расхода     | Сумма      | План            |
     |-----------------|-----------------|------------|-----------------|
     | Продукты        | 2024-11-05      | 3000 руб.  | Продукты        |
     | Транспорт       | 2024-11-10      | 5000 руб.  | Транспорт       |
     | Развлечения     | 2024-11-12      | 2000 руб.  | Развлечения     |
     | Коммунальные услуги | 2024-11-20  | 4000 руб.  | Коммунальные    |

   - **Пример таблицы распределения по категориям:**
   
     | Категория       | Общая сумма      | Процент от расходов |
     |-----------------|-----------------|---------------------|
     | Продукты        | 15000 руб.      | 30%                |
     | Транспорт       | 10000 руб.      | 20%                |
     | Развлечения     | 7000 руб.       | 14%                |
     | Коммунальные    | 13000 руб.      | 26%                |

5. **Инвентаризация и соответствие баланса кошельков**
   - **Цель:**
     Сравнить баланс по транзакциям с балансом по кошелькам, полученным через инвентаризацию.
   - **Условия:**
     - Отображаются даты инвентаризации, балансы по кошелькам и рассчитанные балансы по транзакциям.
     - Отклонения выделяются для визуального анализа.
   - **Пример таблицы:**
   
     | Дата инвентаризации | Баланс по кошелькам | Баланс по транзакциям | Разница |
     |---------------------|---------------------|-----------------------|---------|
     | 2024-11-01          | 10000 руб.         | 10200 руб.           | +200 руб. |
     | 2024-12-01          | 15000 руб.         | 14900 руб.           | -100 руб. |

   - **График:**
     - Две линии:
       - Баланс по кошелькам.
       - Баланс по транзакциям.
     - Идеальное соответствие — совпадающие линии. Отклонения визуализируются как расхождения между линиями.

6. **Время задержки средств**
   - **Цель:**
     Показать, как долго средства задерживаются перед их использованием.
   - **Условия:**
     - Ось абсцисс: дата поступления средств.
     - Ось ординат: количество дней от даты поступления до даты использования.
     - Используются только реальные доходы и расходы.
   - **Пример графика:**
     - Точки на графике:
       - Каждая точка представляет доход и задержку в днях до его использования.
       - Линия тренда может показывать среднюю задержку по времени.
     - Пример: точка с координатами (2024-11-01, 5) означает, что доход от 1 ноября 2024 года был использован через 5 дней.

7. **Планы с отрицательным балансом и неподкрепленные транзакции**

   - **Цель:**
     Показать планы, которые имеют отрицательный баланс, и транзакции, которые не связаны с планами, для анализа потока финансов.

   - **Условия:**

     - Первая таблица отображает планы без родительских планов и с отрицательным балансом.
     - Вторая таблица отображает транзакции, которые не привязаны к планам.

   - **Пример таблиц:**

     **Таблица планов с отрицательным балансом:**

     | План   | Баланс     | Описание       |
     | ------ | ---------- | -------------- |
     | План 1 | -5000 руб. | Пример плана 1 |
     | План 2 | -2000 руб. | Пример плана 2 |

     **Таблица неподкрепленных транзакций:**

     | Дата       | Категория | Сумма     | Описание              |
     | ---------- | --------- | --------- | --------------------- |
     | 2024-11-20 | Продукты  | 1500 руб. | Не привязана к планам |
     | 2024-11-22 | Транспорт | 3000 руб. | Не привязана к планам |

   - **Тоталы:**

     - Общий отрицательный баланс по планам: -7000 руб.
     - Общая сумма неподкрепленных транзакций: 4500 руб.

8. **Баланс планов во времени**

   - **Цель:**
     Показать динамику балансов планов во времени, чтобы следить за тем, чтобы баланс не становился отрицательным.

   - **Условия:**

     - Для каждого плана строится график баланса во времени.
     - Предполагается, что все планируемые доходы и расходы будут выполнены.

   - **Пример графика:**

     - Ось X: временная шкала.
     - Ось Y: баланс плана.
     - Линия, показывающая баланс плана, с выделением областей, где баланс становится отрицательным.

     **Таблица данных для графика:**

     | Дата       | План       | Баланс     |
     | ---------- | ---------- | ---------- |
     | 2024-11-01 | Накопления | 10000 руб. |
     | 2024-11-15 | Накопления | 8000 руб.  |
     | 2024-12-01 | Накопления | 6000 руб.  |

   - **Цель визуализации:**

     - Выявить планы, которые могут уйти в отрицательный баланс, и предпринять действия для коррекции.

