# Some internal thoughts

1. Planned-actual atomic transactions (current implementation) correspondence is important, otherwise I'll need to close planned transactions in favour of unknown actual in order to avoid the budget overflow.

## Plan types

- Planned Expense
- Planned Income
- Budget
- Planned Recurring Expense
- Planned Recurring Income

## Actual Transactions linking

- Date: to planned recurring: с накапливанием или с завершением. С или без завершения. Потом таргет даты - диапазон или одна.
- Примеры
	- Планируемый доход раз в неделю 100
		- Линк на первый день первой недели 110, дата транзакции другая
			- Volume остальных не уменьшается
			- Link with completion
		- Линк на первый день второй недели 80, дата транзакции другая
			- Неделя завершена
			- Link with completion
		- Не амортизируй детей.
	- Квартира 30/день
		- Заплатил за первые 5 дней 135, остаток перетекает, но completion. Диапазон.
		- Заплатил за седьмой день 45, взялось из других дней.
		- Короче это значит что виртуальные дети открыты, а парент закрыт
		- Если бы они были созданы вручную, они бы брали-отдавали паренту, а сам парент был бы фиксированный, чтобы перерасходы по дням не вываливались. С другой стороны это как бы "амортизируй детей". Отдавай больше. А тотал оставляй фиксом.
		- Перерасход? Уходи в минус либо бери из парента. Будь закрытым либо открытым.
		- Недорасход + completion? Оставляй себе либо отдавай паренту. Autoalloc / manual alloc.
		- С другой стороны, закрытость - это когда потратили меньше и закрыли но средства остаются внутри. Потратили больше - ушли в минус.
		- А открытость - это когда нет возможности держать резервные средства при completion.
		- Completion - это когда планируемые уходят паренту. Либо в другое место. Но если паренту то этот initial planned amount конечно хочется сохранить. Тогда 